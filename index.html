<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elevents</title>
  <style>
    body { font-family: Arial; background:#121212; color:#eee; margin:0; padding:20px; }
    header h1 { text-align:center; margin-bottom:20px; }
    #events { display:flex; flex-direction:column; gap:15px; }
    .event-card { background:#1e1e1e; border:1px solid #333; border-radius:10px; padding:15px; transition:0.2s; }
    .event-card:hover { transform:translateY(-3px); box-shadow:0 4px 15px rgba(0,0,0,0.5); }
    .event-card h3 { color:#ffcc00; margin-top:0; }
    .event-card img { max-width:100%; border-radius:5px; margin-top:10px; }
    form { display:flex; flex-wrap:wrap; gap:10px; margin-top:15px; }
    form input, form select, form button { padding:10px; border-radius:5px; border:none; }
    form input, form select { flex:1 1 150px; background:#2c2c2c; color:#eee; }
    form input::placeholder { color:#aaa; }
    form button { flex:1 1 100px; background:#ffcc00; color:#121212; cursor:pointer; transition:0.2s; }
    form button:hover { background:#e6b800; }
    @media(max-width:600px){form{flex-direction:column;}form input, form select, form button{flex:1 1 100%;}}
  </style>
</head>
<body>
  <header><h1>üéâ Elevents</h1></header>

  <main>
    <section id="events">
      <p>Events werden hier angezeigt.</p>
    </section>
  </main>

  <footer>
    <h2>Neues Event hinzuf√ºgen</h2>
    <form id="eventForm">
      <input type="text" id="title" placeholder="Titel" required>
      <input type="text" id="city" placeholder="Stadt" required>
      <input type="date" id="date" required>
      <input type="text" id="type" placeholder="Typ" required>
      <input type="text" id="img" placeholder="Bild-URL (optional)">
      <button type="submit">‚ûï Speichern</button>
    </form>
  </footer>

  <script>
    function loadEvents() {
      google.script.run.withSuccessHandler(renderEvents).getEvents();
    }

    function renderEvents(events) {
      const container = document.getElementById("events");
      container.innerHTML = "";
      if(events.length === 0){container.innerHTML="<p>Keine Events vorhanden.</p>";return;}
      events.forEach(ev=>{
        const card=document.createElement("div");
        card.className="event-card";
        card.innerHTML=`<h3>${ev.title}</h3><p>üìç ${ev.city}</p><p>üìÖ ${ev.date}</p><p>üé≠ ${ev.type}</p>${ev.img?`<img src="${ev.img}" alt="${ev.title}">`:``}`;
        container.appendChild(card);
      });
    }

    document.getElementById("eventForm").addEventListener("submit", e=>{
      e.preventDefault();
      const t=document.getElementById("title").value;
      const c=document.getElementById("city").value;
      const d=document.getElementById("date").value;
      const ty=document.getElementById("type").value;
      const i=document.getElementById("img").value;
      google.script.run.withSuccessHandler(()=>{
        document.getElementById("eventForm").reset();
        loadEvents();
      }).addEvent(t,c,d,ty,i);
    });

    window.onload=loadEvents;
  </script>
</body>
</html>
